<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>3. Catch Expansion • mscatch</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="3. Catch Expansion">
<meta property="og:description" content="mscatch">
<meta property="og:image" content="https://noaa-edab.github.io/mscatch/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">mscatch</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/mscatch.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/1dataNeeds.html">1. Data Requirements</a>
    </li>
    <li>
      <a href="../articles/2aggregationRules.html">2. Rules of Aggregation</a>
    </li>
    <li>
      <a href="../articles/3catchExpansion.html">3. Catch Expansion</a>
    </li>
    <li>
      <a href="../articles/4sampleFigures.html">4. Sample Output</a>
    </li>
    <li>
      <a href="../articles/5notes.html">Notes</a>
    </li>
    <li>
      <a href="../articles/underlyingRules.html">Underlying Rules</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/NOAA-EDAB/mscatch/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="3catchExpansion_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>3. Catch Expansion</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/NOAA-EDAB/mscatch/blob/HEAD/vignettes/3catchExpansion.Rmd" class="external-link"><code>vignettes/3catchExpansion.Rmd</code></a></small>
      <div class="hidden name"><code>3catchExpansion.Rmd</code></div>

    </div>

    
    
<p>The final stage in data preparation (after <a href="2aggregationRules.html">aggregating the data</a>) is to expand the catch data to a distribution of weights using a length-weight relationship, then finally to scale the weights to match total landings.</p>
<div class="section level2">
<h2 id="len-weight">Length-weight relationship<a class="anchor" aria-label="anchor" href="#len-weight"></a>
</h2>
<p>Length-weight data is obtained from SVDBS (other data sources can be substituted if necessary). A length-weight relationship is fit to the data using <code><a href="../reference/fit_length_weight.html">mscatch::fit_length_weight</a></code> (as an alternative parameter values from database svdbs.LENGTH_WEIGHT_COEFFICIENTS can be used, see <a href="https://noaa-edab.github.io/survdat/reference/get_length_weight.html" class="external-link"><code>survdat::get_length_weight</code></a>. The relationship between the weight and length of fish <em>i</em> is modelled as,</p>
<p><span class="math display">\[ W_i = \alpha L_i ^ \beta e^{z_i}\]</span></p>
<p>where <span class="math inline">\(\alpha\)</span> and <span class="math inline">\(\beta\)</span> are intercept and slope parameters (on log scale) and <span class="math inline">\(z_i \sim N(0,\sigma^2)\)</span></p>
<p>This model can be extended to :</p>
<p><span class="math display">\[ W_{ji} = \alpha L_{ji} ^ {\beta_j} e^{z_i} \]</span> for season j, j= 1, …, 4 (spring, summer, fall, winter) or sex j, j = 1, …, 3 (0, 1, 2 categories) or extended further to include season:sex combinations. These models are all nested and can therefore be tested using standard statistical methods. See <a href="../reference/fit_length_weight.html"><code>fit_length_weight</code></a> for fitting details</p>
</div>
<div class="section level2">
<h2 id="expansion-of-landings">Expansion of landings<a class="anchor" aria-label="anchor" href="#expansion-of-landings"></a>
</h2>
<p>The fitted length-weight relationship is applied to the length distributions and the aggregated landings are split accordingly using <a href="../reference/expand_landings_to_lengths.html"><code>expand_landings_to_lengths</code></a>. All unclassified landings are then expanded using a similar method.</p>
<div class="section level3">
<h3 id="known-market-codes">Known market codes<a class="anchor" aria-label="anchor" href="#known-market-codes"></a>
</h3>
<p>For each unique category (YEAR, QTR, NEGEAR, MARKET_CODE) we have both total landings (metric tons) and a sample of fish lengths for this category. The sampled fish lengths are converted to mean weights using the <a href="#len-weight">weight-length relationship</a>. The resulting sample fish weights are mean weights (metric tons). The weight distribution of sampled fish is then scaled to the weight of total landings. This scaling assumes that the landed (commercial) fish have the same length distribution as the sampled fish.</p>
<p>For each unique category we define</p>
<p><span class="math display">\[expansion \; factor = \frac{total \; landings}{\sum sampled \; fish \; weigths} \]</span> The expanded weights of each unique category are then scaled by this expansion factor to equal the total landings of the category.</p>
<p><span class="math display">\[expanded \; sample\; weights \; = expansion \; factor \;*\; sampled \; fish \; weights\]</span></p>
<p>The result is a distribution of weights based on lengths for each unique category.</p>
</div>
<div class="section level3">
<h3 id="unclassified-market-code">Unclassified market code<a class="anchor" aria-label="anchor" href="#unclassified-market-code"></a>
</h3>
<p>The unclassified landings for a specific (YEAR, QTR, NEGEAR) are assumed to be a mixture of fish lengths similar to that in the observed MARKET_CODEs. Therefore the length distribution for the unclassified landings are assumed to have the same distribution as the length distributions of the landed fish in all of the known market codes combined. The sampled fish lengths (from the known market codes) are converted to weights using the <a href="#len-weight">weight-length relationship</a>.</p>
<p>For each unique category we define</p>
<p><span class="math display">\[expansion \; factor = \frac{landings \; of \; unclassifieds}{\sum landings \; of \; known \; market \; codes  } \]</span></p>
<p>leading to the expanded weights of the unclassified sample</p>
<p><span class="math display">\[expanded \; unclassified\; weights \; = expansion \; factor \;*\; fish \; weights \; of \; known \; market \; codes\]</span></p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Andy Beet, Laurel Smith, Sean Lucey.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
